{"version":3,"sources":["components/AppButton/AppButton.tsx","features/dashboard/components/StudentCompetencies/StudentCompetencies.tsx","features/dashboard/components/KeyStatistic/KeyStatistic.tsx","features/dashboard/components/CustomersTop/CustomersTop.tsx","features/dashboard/components/TypicalTeam/TypicalTeam.tsx","features/dashboard/components/KeyTechnologyStudents/KeyTechnologyStudents.tsx","features/dashboard/components/PieDiagram/PieConfig.ts","features/dashboard/components/PieDiagram/StudentsByCourse.tsx","features/dashboard/components/PieDiagram/CustomersByActivity.tsx","features/dashboard/components/PieDiagram/CustomersByArea.tsx","features/dashboard/pages/Dashboard/Dashboard.tsx","features/dashboard/components/styles.module.scss","utils/stringUtils.ts","components/AppButton/style.module.scss","features/dashboard/pages/Dashboard/styles.module.scss"],"names":["buttonTypesMap","primary","style","secondary","primaryAccent","secondaryAccent","danger","transparent","AppButton","icon","type","buttonType","children","className","to","props","buttonClassName","cls","appButton","content","Wrapper","StudentCompetencies","data","styles","competenciesWrapper","map","item","index","competence","value","KeyStatistic","keyStatsWrapper","getWordForm","studentsCount","projectsCount","customersCount","curatorsCount","teamsCount","CustomersTop","topCustomerWrapper","underlineListItem","name","TypicalTeam","typicalTeamWrapper","role","BarTheme","fontFamily","textColor","fontSize","axis","ticks","text","KeyTechnologyStudents","barChartWrapper","keys","indexBy","margin","top","right","bottom","left","padding","colors","axisLeft","tickSize","axisBottom","labelTextColor","animate","isInteractive","theme","config","borderWidth","borderColor","arcLabelsTextColor","enableArcLinkLabels","StudentsByCourse","pieDiagramWrapper","id","legends","anchor","direction","justify","itemWidth","itemHeight","itemsSpacing","symbolSize","itemDirection","CustomersByActivity","CustomersByArea","pieDiagramWrapper_s","Dashboard","useParams","eventId","Number","dispatch","useAppDispatch","componentRef","useRef","event","useAppSelector","selectEventsList","find","dashboardData","selectDashboardData","loading","selectLoading","useState","exportVisibility","setExportVisibility","useEffect","fetchDashboard","exportComponentAsPNG","fileName","then","AppLoadingSpinner","fullHeight","container","ref","title","undefined","row","col6","underlineTitle","keyTechnologyStudents","col3","keyStatistic","underlineTitle_s","customersTop","studentCompetencies","desiredStudentCompetencies","customersByActivity","customersByArea","studentsByCourse","exportBtn","onClick","DeveloperBoardRounded","typicalTeam","module","exports","truncate","string","count","length","substr","number","oneForm","twoForm","fiveForm","lastTwoDigit","Math","abs","lastDigit"],"mappings":"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","file":"static/js/7.3e6e2116.chunk.js","sourcesContent":["import React from 'react'\nimport cls from 'classnames'\nimport { Link } from 'react-router-dom'\n\nimport style from './style.module.scss'\n\ninterface AddProps {\n  icon?: React.ReactNode\n  buttonType?: AppButtonType\n  /**\n   * We can pass link in this propery to make link button.\n   */\n  to?: string\n}\n\ninterface Props extends AddProps, React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement> { }\n\nconst buttonTypesMap = {\n  primary: style.primary,\n  secondary: style.secondary,\n  primaryAccent: style.primaryAccent,\n  secondaryAccent: style.secondaryAccent,\n  danger: style.danger,\n  transparent: style.transparent,\n}\n\ntype AppButtonType = keyof typeof buttonTypesMap;\n\nexport const AppButton: React.FC<Props> = ({\n  icon,\n  type,\n  buttonType,\n  children,\n  className,\n  to,\n  ...props\n}) => {\n  const buttonClassName = cls([buttonTypesMap[buttonType ?? 'primary'], style.appButton, className])\n\n  const content = children && (\n    <span className={style.content}>{children}</span>\n  )\n\n  const Wrapper: React.FC = ({ children }) => to ? (\n    <Link\n      className={buttonClassName}\n      to={to}\n    >\n      {children}\n    </Link>\n  ) : (\n    <button\n      {...props}\n      type={type || 'button'}\n      className={buttonClassName}\n    >\n      {children}\n    </button>\n  )\n\n  return (\n    <Wrapper>\n      {icon}\n      {content}\n    </Wrapper>\n  )\n}\n","import { StudentCompetenciesModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\ninterface Props {\n  data: StudentCompetenciesModel[]\n}\n\nexport const StudentCompetencies: React.FC<Props> = ({ data }) => (\n  <div className={styles.competenciesWrapper}>\n    {data.map((item, index) => (\n      <div key={index}>\n        <p>{item.competence}</p>\n        <h3>{item.value}%</h3>\n      </div>\n    ))}\n  </div>\n)\n","import React from 'react'\nimport { KeyStatisticModel } from 'src/features/diagrams/models'\nimport { getWordForm } from 'src/utils/stringUtils'\n\nimport styles from '../styles.module.scss'\n\ninterface Props {\n  data: KeyStatisticModel\n}\n\nexport const KeyStatistic: React.FC<Props> = ({ data }) => (\n  <div className={styles.keyStatsWrapper}>\n    <div>\n      <p>\n        {getWordForm(data.studentsCount, 'Студент', 'Студента', 'Студентов')}\n      </p>\n      <h3>\n        {data.studentsCount}\n      </h3>\n    </div>\n    <div>\n      <p>\n        {getWordForm(data.projectsCount, 'Проект', 'Проекта', 'Проектов')}\n      </p>\n      <h3>\n        {data.projectsCount}\n      </h3>\n    </div>\n    <div>\n      <p>\n        {getWordForm(data.customersCount, 'Заказчик', 'Заказчика', 'Заказчиков')}\n      </p>\n      <h3>\n        {data.customersCount}\n      </h3>\n    </div>\n    <div>\n      <p>\n        {getWordForm(data.curatorsCount, 'Куратор', 'Куратора', 'Кураторов')}\n      </p>\n      <h3>\n        {data.curatorsCount}\n      </h3>\n    </div>\n    <div>\n      <p>\n        {getWordForm(data.teamsCount, 'Команда', 'Команды', 'Команд')}\n      </p>\n      <h3>\n        {data.teamsCount}\n      </h3>\n    </div>\n  </div>\n)\n","import React from 'react'\nimport { getWordForm } from 'src/utils/stringUtils'\nimport { CustomersTopModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\ninterface Props {\n  data: CustomersTopModel[]\n}\n\nexport const CustomersTop: React.FC<Props> = ({ data }) => (\n  <ol className={styles.topCustomerWrapper}>\n    {data.map((item, index) => (\n      <div\n        key={index}\n        className={styles.underlineListItem}\n      >\n        <li>{item.name}</li>\n        <h3>\n          {item.projectsCount}{' '}\n          {getWordForm(item.projectsCount, 'проект', 'проекта', 'проектов')}\n        </h3>\n      </div>\n    ))}\n  </ol>\n)\n","import { TypicalTeamModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\ninterface Props {\n  data: TypicalTeamModel[]\n}\n\nexport const TypicalTeam: React.FC<Props> = ({ data }) => (\n  <div className={styles.typicalTeamWrapper}>\n    {data.map((item, index) => (\n      <div\n        key={index}\n        className={styles.underlineListItem}\n      >\n        <h4>{item.studentsCount}x</h4>\n        <p>{item.role}</p>\n      </div>\n    ))}\n  </div>\n)\n","import React from 'react'\nimport { ResponsiveBar } from '@nivo/bar'\nimport { KeyTechnologyStudentsModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\nconst BarTheme = {\n  fontFamily: 'var(--content-font-family)',\n  textColor: 'var(--text-main)',\n  fontSize: 16,\n  axis: { ticks: { text: { fontSize: 10 } } },\n}\n\ninterface Props {\n  data: KeyTechnologyStudentsModel[]\n}\n\nexport const KeyTechnologyStudents: React.FC<Props> = ({ data }) => (\n  <div className={styles.barChartWrapper}>\n    <ResponsiveBar\n      data={data}\n      keys={[ 'value' ]}\n      indexBy=\"keyTechnology\"\n      margin={{\n        top: 0,\n        right: 50,\n        bottom: 30,\n        left: 40,\n      }}\n      padding={0.6}\n      colors={['#177ddc']}\n      axisLeft={{ tickSize: 0 }}\n      axisBottom={{ tickSize: 0 }}\n      labelTextColor=\"#ffffff\"\n      animate={false}\n      isInteractive={false}\n      theme={BarTheme}\n    />\n  </div>\n)\n","export const config = {\n  value: 'count',\n  borderWidth: 1,\n  borderColor: '#f0f2f5',\n  arcLabelsTextColor:'#ffffff',\n  enableArcLinkLabels: false,\n  animate: false,\n}\n","import { ResponsivePie } from '@nivo/pie'\nimport { StudentsByCourseModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\nimport { config } from './PieConfig'\n\ninterface Props {\n  data: StudentsByCourseModel[]\n}\n\nexport const StudentsByCourse: React.FC<Props> = ({ data }) => (\n  <div className={styles.pieDiagramWrapper}>\n    <ResponsivePie\n      data={data}\n      id='course'\n      legends={[{\n        anchor: 'top-left',\n        direction: 'column',\n        justify: false,\n        itemWidth: 100,\n        itemHeight: 20,\n        itemsSpacing: 0,\n        symbolSize: 20,\n        itemDirection: 'left-to-right',\n      }]}\n      colors={[\n        '#65b7f3',\n        '#3c9ae8',\n        '#177ddc',\n        '#15395b',\n      ]}\n      {...config}\n    />\n  </div>\n)\n","import { ResponsivePie } from '@nivo/pie'\nimport { CustomersByActivityModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\nimport { config } from './PieConfig'\n\ninterface Props {\n  data: CustomersByActivityModel[]\n}\n\nexport const CustomersByActivity: React.FC<Props> = ({ data }) => (\n  <div className={styles.pieDiagramWrapper}>\n    <ResponsivePie\n      data={data}\n      id='activity'\n      legends={[{\n        anchor: 'top-left',\n        direction: 'column',\n        justify: false,\n        itemWidth: 100,\n        itemHeight: 20,\n        itemsSpacing: 0,\n        symbolSize: 20,\n        itemDirection: 'left-to-right',\n      }]}\n      colors={[\n        '#65b7f3',\n        '#3c9ae8',\n        '#177ddc',\n        '#15395b',\n      ]}\n      {...config}\n    />\n  </div>\n)\n","import { ResponsivePie } from '@nivo/pie'\nimport { CustomersByAreaModel } from 'src/models'\n\nimport styles from '../styles.module.scss'\n\nimport { config } from './PieConfig'\n\ninterface Props {\n  data: CustomersByAreaModel[]\n}\n\nexport const CustomersByArea: React.FC<Props> = ({ data }) => (\n  <div className={styles.pieDiagramWrapper_s}>\n    <ResponsivePie\n      data={data}\n      id='area'\n      legends={[{\n        anchor: 'bottom-left',\n        direction: 'column',\n        justify: false,\n        itemWidth: 100,\n        itemHeight: 20,\n        itemsSpacing: 0,\n        symbolSize: 20,\n        itemDirection: 'left-to-right',\n      }]}\n      colors={[\n        '#177ddc',\n        '#15395b',\n      ]}\n      {...config}\n    />\n  </div>\n)\n","import React, { useEffect, useRef, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { exportComponentAsPNG } from 'react-component-export-image'\nimport { fetchDashboard, selectLoading, selectDashboardData } from 'src/store/slices/dashboard'\nimport { useAppDispatch, useAppSelector } from 'src/store'\nimport { selectEventsList } from 'src/store/slices/events'\nimport { AppLoadingSpinner } from 'src/components/AppLoadingSpinner'\nimport { AppButton } from 'src/components/AppButton'\nimport { DeveloperBoardRounded } from '@material-ui/icons'\n\nimport { StudentCompetencies } from '../../components/StudentCompetencies'\nimport { KeyStatistic } from '../../components/KeyStatistic'\nimport { CustomersTop } from '../../components/CustomersTop'\nimport { TypicalTeam } from '../../components/TypicalTeam'\nimport { KeyTechnologyStudents } from '../../components/KeyTechnologyStudents'\nimport { CustomersByActivity, CustomersByArea, StudentsByCourse } from '../../components/PieDiagram'\n\nimport styles from './styles.module.scss'\n\nexport const Dashboard: React.FC = () => {\n  const { id } = useParams()\n  const eventId = Number(id)\n  const dispatch = useAppDispatch()\n  const componentRef = useRef(null)\n  const events = useAppSelector(selectEventsList)\n  const event = events.find(item => item.id === eventId)\n  const dashboardData = useAppSelector(selectDashboardData(eventId))\n  const loading = useAppSelector(selectLoading)\n  const [exportVisibility, setExportVisibility] = useState(true)\n\n  useEffect(() => {\n    if (!dashboardData && event) {\n      dispatch(fetchDashboard(eventId))\n    }\n  }, [eventId, dashboardData, event])\n\n  useEffect(() => {\n    if (!exportVisibility) {\n      exportComponentAsPNG(\n        componentRef,\n        { fileName: `dashboard_${eventId}` },\n      ).then(() => setExportVisibility(true))\n    }\n  }, [exportVisibility])\n\n  const exportDashboard = () => {\n    setExportVisibility(false)\n  }\n\n  if (loading || !dashboardData) return <AppLoadingSpinner fullHeight />\n\n  return (\n    <div\n      className={styles.container}\n      ref={componentRef}\n    >\n      {!exportVisibility && <h1 className={styles.title}>{event === undefined ? '' : event.name}</h1>}\n      <div className={styles.row}>\n        <div className={styles.col6}>\n          <h2 className={styles.underlineTitle}>Распределение студентов по направлениям</h2>\n          {dashboardData.keyTechnologyStudents && <KeyTechnologyStudents data={dashboardData.keyTechnologyStudents} />}\n        </div>\n\n        <div className={styles.col3}>\n          <h2>Ключевые показатели</h2>\n          {dashboardData.keyStatistic && <KeyStatistic data={dashboardData.keyStatistic} />}\n          <h2 className={styles.underlineTitle_s}>Топ внешних заказчиков</h2>\n          {dashboardData.customersTop && <CustomersTop data={dashboardData.customersTop} />}\n        </div>\n      </div>\n\n      <div className={styles.row}>\n        <div className={styles.col3}>\n          <h2 className={styles.underlineTitle}>Компетенции участников</h2>\n          {dashboardData.studentCompetencies && <StudentCompetencies data={dashboardData.studentCompetencies} />}\n        </div>\n\n        <div className={styles.col3}>\n          <h2>Желаемые компетенции участников</h2>\n          {dashboardData.desiredStudentCompetencies && <StudentCompetencies data={dashboardData.desiredStudentCompetencies} />}\n        </div>\n\n        <div className={styles.col3}>\n          <h2>Заказчики по сфере деятельности</h2>\n          {dashboardData.customersByActivity && <CustomersByActivity data={dashboardData.customersByActivity} />}\n          {dashboardData.customersByArea && <CustomersByArea data={dashboardData.customersByArea} />}\n        </div>\n      </div>\n\n      <div className={styles.row}>\n        <div className={styles.col3}>\n          <h2 className={styles.underlineTitle}>Распределение студентов по курсам</h2>\n          {dashboardData.studentsByCourse && <StudentsByCourse data={dashboardData.studentsByCourse} />}\n        </div>\n\n        {exportVisibility &&\n            <div className={styles.col3}>\n              <h2 className={styles.underlineTitle}>Экспорт диаграмм</h2>\n              <AppButton\n                className={styles.exportBtn}\n                onClick={exportDashboard}\n                buttonType=\"secondary\"\n                icon={<DeveloperBoardRounded />}\n              >\n                Экспорт как PNG\n              </AppButton>\n            </div>\n        }\n\n        <div className={styles.col3}>\n          <h2>Типовая команда</h2>\n          {dashboardData.typicalTeam && <TypicalTeam data={dashboardData.typicalTeam} />}\n        </div>\n      </div>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"keyStatsWrapper\":\"styles_keyStatsWrapper__SE0Ue\",\"underlineListItem\":\"styles_underlineListItem__mzeCq\",\"topCustomerWrapper\":\"styles_topCustomerWrapper__oZ6LS\",\"typicalTeamWrapper\":\"styles_typicalTeamWrapper__3i2K0\",\"competenciesWrapper\":\"styles_competenciesWrapper__2MVlN\",\"barChartWrapper\":\"styles_barChartWrapper__k3Pko\",\"pieDiagramWrapper\":\"styles_pieDiagramWrapper__adxy5\",\"pieDiagramWrapper_s\":\"styles_pieDiagramWrapper_s__KRhq3\"};","export function truncate(string: string, count: number) {\n  return (string.length > count) ? string.substr(0, count - 1) + '\\u2026' : string\n}\n\nexport function getWordForm(number: number, oneForm: string, twoForm: string, fiveForm: string) {\n  const lastTwoDigit = Math.abs(number) % 100\n  const lastDigit = lastTwoDigit % 10\n\n  if (lastTwoDigit > 10 && lastTwoDigit < 20) {\n    return fiveForm\n  }\n\n  if (lastDigit > 1 && lastDigit < 5) {\n    return twoForm\n  }\n\n  if (lastDigit === 1) {\n    return oneForm\n  }\n\n  return fiveForm\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appButton\":\"style_appButton__1pqmO\",\"primary\":\"style_primary__zSiu_\",\"secondary\":\"style_secondary__FB-T0\",\"danger\":\"style_danger__1QRN6\",\"transparent\":\"style_transparent__2hh6N\",\"primaryAccent\":\"style_primaryAccent__vshDb\",\"secondaryAccent\":\"style_secondaryAccent__1YcyB\",\"icon\":\"style_icon__2XE6w\",\"content\":\"style_content__1J6mB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1KLrV\",\"underlineTitle\":\"styles_underlineTitle__jTkt2\",\"underlineTitle_s\":\"styles_underlineTitle_s__oIurI\",\"title\":\"styles_title__1alyf\",\"row\":\"styles_row__CS1ZJ\",\"col6\":\"styles_col6__3RqwU\",\"col3\":\"styles_col3__3v5th\",\"exportBtn\":\"styles_exportBtn__3xzSS\"};"],"sourceRoot":""}