(this["webpackJsonpworkshop-visualization"]=this["webpackJsonpworkshop-visualization"]||[]).push([[1],{17:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),c=n.n(r),a=n(3),o=n(49),u=new o.a("workshop-mongo-qqunb");function i(){var e,t=null===(e=u.currentUser)||void 0===e?void 0:e.mongoClient("mongodb-atlas");if(!t)throw Error("Database connection error! Unable to create MongoDB Client.");return t}function s(){return(s=Object(a.a)(c.a.mark((function e(t,n){var r,a,o,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:10,a=i(),o=a.db(t).collection(n),e.abrupt("return",o.find({},{limit:r}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l={login:function(){var e=o.b.apiKey("A80ekR6X3jZ4vubEuT9oHwVqqBLWRgPCOxQNC4eS63hVG1d31R7wi99wUxNiz5nZ");return u.logIn(e,!1)},getItemById:function(e,t,n){return i().db(e).collection(t).findOne({_id:n})},getItems:function(e,t){return s.apply(this,arguments)},getItemByEventId:function(e,t,n){return i().db(e).collection(t).findOne({event_id:n})}}},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b}));var r=n(13),c=n(1),a=n.n(c),o=n(3),u=function(e){return{id:e.id,name:e.name,description:e.description,startDate:e.start_date.toLocaleString("ru-RU",{year:"numeric",month:"long"}),endDate:e.end_date.toLocaleString("ru-RU",{year:"numeric",month:"long"})}},i=n(17),s="events",l="list";function d(){return(d=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getItems(s,l);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return u(e)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){return d.apply(this,arguments)},f=Object(r.b)("events/fetchEventsList",p),m=Object(r.c)({name:"events",initialState:{list:[]},reducers:{},extraReducers:function(e){return e.addCase(f.fulfilled,(function(e,t){e.list=t.payload}))}}),b=function(e){return e.events.list}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(13),c=n(29),a=n(56),o=n(33),u=n(57),i=Object(r.a)({reducer:{dashboard:a.a.reducer,diagrams:u.a.reducer,events:o.a.reducer}}),s=function(){return Object(c.b)()},l=c.c},35:function(e,t,n){"use strict";function r(e){return"/workshop-visualization"+e}n.d(t,"a",(function(){return r}))},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(10),c=(n(0),n(98)),a=n(53),o=n.n(a),u=n(50),i=n.n(u),s=n(5),l=function(e){var t=e.fullHeight;return Object(s.jsx)("div",{className:o()(i.a.loading,Object(r.a)({},i.a.fullHeight,t)),children:Object(s.jsx)(c.a,{color:"primary",style:{color:"var(--primary)"},size:50})})}},50:function(e,t,n){e.exports={loading:"style_loading__1qrKv",fullHeight:"style_fullHeight__1rlAE"}},56:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return w}));var r=n(1),c=n.n(r),a=n(3),o=n(13),u=function(e){return{studentsCount:e.key_statistic.students_count,projectsCount:e.key_statistic.projects_count,teamsCount:e.key_statistic.teams_count,curatorsCount:e.key_statistic.curators_count,customersCount:e.key_statistic.customers_count}},i=function(e){return e.customers_top.map((function(e){return{name:e.name,projectsCount:e.projects_count}})).sort((function(e,t){return e.projectsCount<t.projectsCount?1:-1})).slice(0,5)},s=function(e){return e.typical_team.map((function(e){return{role:e.role,studentsCount:e.students_count}}))},l=function(e){return e.student_competencies.map((function(e){return{competence:e.competence,value:e.value}})).sort((function(e,t){return e.value<t.value?1:-1})).slice(0,8)},d=function(e){return e.desired_student_competencies.map((function(e){return{competence:e.competence,value:e.value}})).sort((function(e,t){return e.value<t.value?1:-1})).slice(0,8)},p=function(e){return e.key_technology_students.map((function(e){return{keyTechnology:e.key_technology,value:e.value}}))},f=function(e){return e.students_by_course.map((function(e){return{course:e.course,count:e.count}}))},m=function(e){return e.customers_by_activity.map((function(e){return{activity:e.activity,count:e.count}}))},b=function(e){return e.customers_by_area.map((function(e){return{area:e.area,count:e.count}}))},v=function(e){return{keyStatistic:u(e),customersTop:i(e),typicalTeam:s(e),studentCompetencies:l(e),desiredStudentCompetencies:d(e),keyTechnologyStudents:p(e),studentsByCourse:f(e),customersByActivity:m(e),customersByArea:b(e)}},y=n(17),h="statistics",j="dashboard";function g(){return(g=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.getItemByEventId(h,j,t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",v(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _={getDashboard:function(e){return g.apply(this,arguments)}},O=Object(o.b)("dashboard/fetch",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getDashboard(t);case 2:return n=e.sent,e.abrupt("return",{eventId:t,dashboard:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(o.c)({name:"dashboard",initialState:{loading:!0,data:{}},reducers:{},extraReducers:function(e){return e.addCase(O.pending,(function(e){e.loading=!0})).addCase(O.fulfilled,(function(e,t){var n=t.payload,r=n.eventId,c=n.dashboard;c&&(e.data[r]=c),e.loading=!1}))}}),k=function(e){return e.dashboard.loading},w=function(e){return function(t){return t.dashboard.data[e]}}},57:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return O}));var r=n(1),c=n.n(r),a=n(3),o=n(13),u=function(e){return e.life_scenario_projects.map((function(e){return{keyTechnology:e.key_technology,professionalValue:e.professional_value,entrepreneurialValue:e.entrepreneurial_value,scientificValue:e.scientific_value}}))},i=function(e){return e.life_scenario_students.map((function(e){return{keyTechnology:e.key_technology,professionalValue:e.professional_value,entrepreneurialValue:e.entrepreneurial_value,scientificValue:e.scientific_value}}))},s=function(e){return e.project_competencies.map((function(e){return{competency:e.competency,competencyType:e.competency_type,value:e.value}}))},l=function(e){return e.student_competencies.map((function(e){return{competency:e.competency,competencyType:e.competency_type,value:e.value}}))},d=function(e){return{nodes:e.key_technology_customers.nodes,edges:e.key_technology_customers.edges}},p=function(e){return{nodes:e.key_technology_curators.nodes,edges:e.key_technology_curators.edges}},f=function(e){return{lifeScenarioProjects:u(e),lifeScenarioStudents:i(e),projectCompetencies:s(e),studentCompetencies:l(e),keyTechnologyCustomers:d(e),keyTechnologyCurators:p(e)}},m=n(17),b="statistics",v="diagrams";function y(){return(y=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getItemByEventId(b,v,t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",f(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h={getDiagrams:function(e){return y.apply(this,arguments)}},j=Object(o.b)("diagrams/fetch",function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getDiagrams(t);case 2:return n=e.sent,e.abrupt("return",{eventId:t,diagrams:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(o.c)({name:"diagrams",initialState:{loading:!0,data:{}},reducers:{},extraReducers:function(e){return e.addCase(j.pending,(function(e){e.loading=!0})).addCase(j.fulfilled,(function(e,t){var n=t.payload,r=n.eventId,c=n.diagrams;c&&(e.data[r]=c),e.loading=!1}))}}),_=function(e){return e.diagrams.loading},O=function(e){return function(t){return t.diagrams.data[e]}}},64:function(e){e.exports=JSON.parse('{"name":"workshop-visualization","version":"0.1.0","private":true,"homepage":"https://danil-kuk.github.io/workshop-visualization","dependencies":{"@ant-design/charts":"^1.0.19","@material-ui/core":"^4.11.3","@material-ui/icons":"^4.11.2","@nivo/bar":"^0.68.0","@nivo/circle-packing":"^0.67.0","@nivo/core":"^0.69.0","@nivo/heatmap":"^0.67.0","@nivo/pie":"^0.69.0","@reduxjs/toolkit":"^1.5.0","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.8.1","@types/jest":"^26.0.20","@types/node":"^12.20.4","@types/react":"^17.0.2","@types/react-dom":"^17.0.1","@types/react-redux":"^7.1.16","@types/react-router-dom":"^5.1.7","axios":"^0.21.1","classnames":"^2.2.6","history":"^5.0.0","node-sass":"^5.0.0","react":"^17.0.1","react-component-export-image":"^1.0.6","react-dom":"^17.0.1","react-graph-vis":"^1.0.7","react-redux":"^7.2.2","react-router-dom":"^6.0.0-beta.0","react-scripts":"4.0.3","realm-web":"^1.2.1","typescript":"^4.2.3","use-dark-mode":"^2.3.1","web-vitals":"^1.1.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint:fix":"npm run lint -- --fix","lint":"eslint -c .eslintrc \\"src/**/*.{ts,tsx}\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/classnames":"^2.2.11","prettier":"2.3.0"}}')},65:function(e,t,n){e.exports={logo:"style_logo__3hEVD"}},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(32),o=n.n(a),u=n(29),i=n(20),s=n(14),l=n(4),d=n(17),p=n(36),f=n(19),m=n(5),b=Object(r.lazy)((function(){return n.e(9).then(n.bind(null,1074))})),v=[{path:"",element:Object(m.jsx)(b,{})}],y=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,1075))})),h=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(7)]).then(n.bind(null,1068))})),j=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(6)]).then(n.bind(null,1069))})),g=[{path:"event/:id",element:Object(m.jsx)(y,{}),children:[{path:"/dashboard",element:Object(m.jsx)(h,{})},{path:"/diagrams",element:Object(m.jsx)(j,{})}]}],_=n(35),O=[{path:"/",children:[].concat(Object(f.a)(v),Object(f.a)(g)),element:Object(m.jsx)(l.b,{})},{path:"*",element:Object(m.jsx)(l.a,{to:Object(_.a)("/")})}],x=n(34),k=n(33),w=function(){var e=Object(l.j)(O,"/workshop-visualization"),t=Object(r.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1];Object(r.useEffect)((function(){d.a.login().then((function(){return a(!0)})).catch((function(e){return console.error("Database connection error",e)}))}),[]);var o=Object(x.b)();return Object(r.useEffect)((function(){c&&o(Object(k.b)())}),[c]),c?Object(m.jsx)(m.Fragment,{children:e}):Object(m.jsx)(p.a,{fullHeight:!0})},C=n(64),I=n(65),S=n.n(I),z=function(){return Object(m.jsx)("header",{children:Object(m.jsx)(D,{})})},D=function(){return Object(m.jsx)("div",{className:S.a.logo,title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b ".concat(C.version),children:Object(m.jsx)(i.b,{to:Object(_.a)("/")})})};n(83),n(84);o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(u.a,{store:x.a,children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(z,{}),Object(m.jsx)(r.Suspense,{fallback:Object(m.jsx)(p.a,{fullHeight:!0}),children:Object(m.jsx)(w,{})})]})})}),document.getElementById("root"))}},[[85,2,4]]]);
//# sourceMappingURL=main.0eb0432e.chunk.js.map