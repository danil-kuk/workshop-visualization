(this["webpackJsonpworkshop-visualization"]=this["webpackJsonpworkshop-visualization"]||[]).push([[0],{22:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(2),c=n.n(r),a=n(4),o=n(49),i=new o.a("workshop-mongo-qqunb");function u(){var t,e=null===(t=i.currentUser)||void 0===t?void 0:t.mongoClient("mongodb-atlas");if(!e)throw Error("Database connection error! Unable to create MongoDB Client.");return e}function s(){return(s=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:10,a=u(),o=a.db(e).collection(n),t.abrupt("return",o.find({},{limit:r}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var l={login:function(){var t=o.b.apiKey("A80ekR6X3jZ4vubEuT9oHwVqqBLWRgPCOxQNC4eS63hVG1d31R7wi99wUxNiz5nZ");return i.logIn(t,!1)},getItemById:function(t,e,n){return u().db(t).collection(e).findOne({_id:n})},getItems:function(t,e){return s.apply(this,arguments)},getItemByEventId:function(t,e,n){return u().db(t).collection(e).findOne({event_id:n})}}},33:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return m}));var r=n(16),c=n(2),a=n.n(c),o=n(4),i=function(t){return{id:t.id,name:t.name,description:t.description,startDate:t.start_date.toLocaleString("ru-RU",{year:"numeric",month:"long"}),endDate:t.end_date.toLocaleString("ru-RU",{year:"numeric",month:"long"})}},u=n(22),s="events",l="list";function d(){return(d=Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.getItems(s,l);case 2:return e=t.sent,t.abrupt("return",e.map((function(t){return i(t)})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=function(){return d.apply(this,arguments)},f=Object(r.b)("events/fetchEventsList",p),b=Object(r.c)({name:"events",initialState:{list:[]},reducers:{},extraReducers:function(t){return t.addCase(f.fulfilled,(function(t,e){t.list=e.payload}))}}),m=function(t){return t.events.list}},34:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s}));var r=n(16),c=n(29),a=n(56),o=n(33),i=Object(r.a)({reducer:{dashboard:a.a.reducer,events:o.a.reducer}}),u=function(){return Object(c.b)()},s=c.c},35:function(t,e,n){"use strict";function r(t){return"/workshop-visualization"+t}n.d(e,"a",(function(){return r}))},36:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(10),c=(n(0),n(97)),a=n(53),o=n.n(a),i=n(50),u=n.n(i),s=n(5),l=function(t){var e=t.fullHeight;return Object(s.jsx)("div",{className:o()(u.a.loading,Object(r.a)({},u.a.fullHeight,e)),children:Object(s.jsx)(c.a,{color:"primary",style:{color:"var(--primary)"},size:50})})}},50:function(t,e,n){t.exports={loading:"style_loading__1qrKv",fullHeight:"style_fullHeight__1rlAE"}},56:function(t,e,n){"use strict";n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return _})),n.d(e,"d",(function(){return k})),n.d(e,"c",(function(){return w}));var r=n(2),c=n.n(r),a=n(4),o=n(16),i=function(t){return{studentsCount:t.key_statistic.students_count,projectsCount:t.key_statistic.projects_count,teamsCount:t.key_statistic.teams_count,curatorsCount:t.key_statistic.curators_count,customersCount:t.key_statistic.customers_count}},u=function(t){return t.customers_top.map((function(t){return{name:t.name,projectsCount:t.projects_count}})).sort((function(t,e){return t.projectsCount<e.projectsCount?1:-1})).slice(0,5)},s=function(t){return t.typical_team.map((function(t){return{role:t.role,studentsCount:t.students_count}}))},l=function(t){return t.student_competencies.map((function(t){return{competence:t.competence,value:t.value}})).sort((function(t,e){return t.value<e.value?1:-1})).slice(0,8)},d=function(t){return t.desired_student_competencies.map((function(t){return{competence:t.competence,value:t.value}})).sort((function(t,e){return t.value<e.value?1:-1})).slice(0,8)},p=function(t){return t.key_technology_students.map((function(t){return{keyTechnology:t.key_technology,value:t.value}}))},f=function(t){return t.students_by_course.map((function(t){return{course:t.course,count:t.count}}))},b=function(t){return t.customers_by_activity.map((function(t){return{activity:t.activity,count:t.count}}))},m=function(t){return t.customers_by_area.map((function(t){return{area:t.area,count:t.count}}))},v=function(t){return{keyStatistic:i(t),customersTop:u(t),typicalTeam:s(t),studentCompetencies:l(t),desiredStudentCompetencies:d(t),keyTechnologyStudents:p(t),studentsByCourse:f(t),customersByActivity:b(t),customersByArea:m(t)}},h=n(22),j="statistics",y="dashboard";function g(){return(g=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.getItemByEventId(j,y,e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",v(n));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O={getDashboard:function(t){return g.apply(this,arguments)}},x=Object(o.b)("dashboard/fetch",function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getDashboard(e);case 2:return n=t.sent,t.abrupt("return",{eventId:e,dashboard:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),_=Object(o.c)({name:"dashboard",initialState:{loading:!0,data:{}},reducers:{},extraReducers:function(t){return t.addCase(x.pending,(function(t){t.loading=!0})).addCase(x.fulfilled,(function(t,e){var n=e.payload,r=n.eventId,c=n.dashboard;c&&(t.data[r]=c),t.loading=!1}))}}),k=function(t){return t.dashboard.loading},w=function(t){return function(e){return e.dashboard.data[t]}}},63:function(t){t.exports=JSON.parse('{"name":"workshop-visualization","version":"0.1.0","private":true,"homepage":"https://danil-kuk.github.io/workshop-visualization","dependencies":{"@ant-design/charts":"^1.0.19","@material-ui/core":"^4.11.3","@material-ui/icons":"^4.11.2","@nivo/bar":"^0.68.0","@nivo/circle-packing":"^0.67.0","@nivo/core":"^0.69.0","@nivo/heatmap":"^0.67.0","@nivo/pie":"^0.69.0","@reduxjs/toolkit":"^1.5.0","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.8.1","@types/jest":"^26.0.20","@types/node":"^12.20.4","@types/react":"^17.0.2","@types/react-dom":"^17.0.1","@types/react-redux":"^7.1.16","@types/react-router-dom":"^5.1.7","axios":"^0.21.1","classnames":"^2.2.6","history":"^5.0.0","node-sass":"^5.0.0","react":"^17.0.1","react-component-export-image":"^1.0.6","react-dom":"^17.0.1","react-graph-vis":"^1.0.7","react-redux":"^7.2.2","react-router-dom":"^6.0.0-beta.0","react-scripts":"4.0.3","realm-web":"^1.2.1","typescript":"^4.2.3","use-dark-mode":"^2.3.1","web-vitals":"^1.1.0"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint:fix":"npm run lint -- --fix","lint":"eslint -c .eslintrc \\"src/**/*.{ts,tsx}\\""},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/classnames":"^2.2.11","prettier":"2.3.0"}}')},64:function(t,e,n){t.exports={logo:"style_logo__3hEVD"}},82:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(31),o=n.n(a),i=n(29),u=n(19),s=n(13),l=n(3),d=n(22),p=n(36),f=n(18),b=n(5),m=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,545))})),v=[{path:"",element:Object(b.jsx)(m,{})}],h=Object(r.lazy)((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,539))})),j=[{path:"dashboard/event/:id",element:Object(b.jsx)(h,{})}],y=n(35),g=[{path:"/",children:[].concat(Object(f.a)(v),Object(f.a)(j)),element:Object(b.jsx)(l.b,{})},{path:"*",element:Object(b.jsx)(l.a,{to:Object(y.a)("/")})}],O=n(34),x=n(33),_=function(){var t=Object(l.j)(g,"/workshop-visualization"),e=Object(r.useState)(!1),n=Object(s.a)(e,2),c=n[0],a=n[1];Object(r.useEffect)((function(){d.a.login().then((function(){return a(!0)})).catch((function(t){return console.error("Database connection error",t)}))}),[]);var o=Object(O.b)();return Object(r.useEffect)((function(){c&&o(Object(x.b)())}),[c]),c?Object(b.jsx)(b.Fragment,{children:t}):Object(b.jsx)(p.a,{fullHeight:!0})},k=n(63),w=n(64),C=n.n(w),I=function(){return Object(b.jsx)("header",{children:Object(b.jsx)(S,{})})},S=function(){return Object(b.jsx)("div",{className:C.a.logo,title:"\u0412\u0435\u0440\u0441\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b ".concat(k.version),children:Object(b.jsx)(u.b,{to:Object(y.a)("/")})})};n(82),n(83);o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(i.a,{store:O.a,children:Object(b.jsxs)(u.a,{children:[Object(b.jsx)(I,{}),Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(p.a,{fullHeight:!0}),children:Object(b.jsx)(_,{})})]})})}),document.getElementById("root"))}},[[84,1,3]]]);
//# sourceMappingURL=main.29dfe3e8.chunk.js.map